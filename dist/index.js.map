{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/tree.js","webpack:///./src/node.js","webpack:///./utils/search-node.js","webpack:///./utils/traversal-tree.js","webpack:///./utils/serialize-tree.js","webpack:///./utils/remove-empty-children.js"],"names":["root","factory","exports","module","define","amd","a","i","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Node","searchNode","traversalTree","serializeTree","removeEmptyChildren","Tree","arguments","length","undefined","_classCallCheck","rootNode","path","set","callback","type","_typeof","target","add","console","log","criteria","targetNode","contains","parent","remove","search","destination","compare","traversal","currentNode","sort","options","assign","key_children","empty_children","result","content","children","_createClass","fieldKey","child","node","push","index","findIndex","removeItems","splice","filter","forEach","parentList","reverse","tree","item","_defineProperty","jTree"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const Node = require('./node');\nconst searchNode = require('../utils/search-node');\nconst traversalTree = require('../utils/traversal-tree');\nconst serializeTree = require('../utils/serialize-tree');\nconst removeEmptyChildren = require('../utils/remove-empty-children');\n\nclass Tree {\n  \n  constructor(object = undefined) {\n    this.rootNode = null;\n    if (object) {\n      this.rootNode = new Node(object);\n    }\n  }\n  \n  // only for rootNode\n  get(path) {\n    return this.rootNode.get(path);\n  }\n  \n  // only for rootNode\n  set(path, value) {\n    this.rootNode.set(path, value);\n  }\n  \n  add(callback, object) {\n    const type = typeof callback;\n    if (type === 'string' && callback === 'root') {\n      this.rootNode = new Node(object);\n      return this;\n    } else if (type === 'function') {\n      const target = searchNode(this, null, callback);\n      if (target && target.add(object)) {\n        return this;\n      } else {\n        console.log('Warning', object);\n      }\n    }\n  }\n  \n  contains(criteria) {\n    return searchNode(this, null, criteria);\n  }\n  \n  remove(criteria) {\n    const targetNode = this.contains(criteria);\n    if (targetNode) {\n      return !!targetNode.parent.remove(criteria);\n    }\n    return false;\n  }\n  \n  move(search, destination) {\n    const targetNode = this.contains(search);\n    if (targetNode && this.remove(search)) {\n      const destinationNode = this.contains(destination);\n      return !!destinationNode.add(targetNode);\n    }\n    return false;\n  }\n  \n  traversal(criteria, callback) {\n    traversalTree(this, null, criteria, callback);\n  }\n  \n  sort(compare) {\n    this.traversal(null, (currentNode) => {\n      currentNode.sort(compare);\n    });\n  }\n  \n  toJson(options = {}) {\n    const optionsDefault = {\n      key_children: 'children',\n      empty_children: true,\n    };\n    options = Object.assign(optionsDefault, options);\n    const result = serializeTree(this, null, [], options);\n    \n    if (!options.empty_children) {\n      removeEmptyChildren(result, null, options);\n    }\n    \n    if (result && result.length > 0) {\n      return result[0];\n    }\n  }\n}\n\nTree.Node = Node;\n\nmodule.exports = Tree; ","module.exports = class Node {\n\n  constructor(content) {\n    this.content = content;\n    this.children = [];\n    this.length = 0;\n  }\n\n  get(fieldKey) {\n    if (typeof this.content[fieldKey] !== 'undefined') {\n      return this.content[fieldKey];\n    }\n  }\n\n  set(fieldKey, value) {\n    return !!(this.content[fieldKey] = value);\n  }\n\n  add(child) {\n    const node = (child instanceof Node) ? child : new Node(child);\n    node.parent = this;\n    this.length++;\n    this.children.push(node);\n    return node;\n  }\n\n  remove(callback) {\n    const index = this.children.findIndex(callback);\n    if (index > -1) {\n      const removeItems = this.children.splice(index, 1);\n      this.length--;\n      return removeItems;\n    } return [];\n  }\n\n  sort(compare) {\n    return this.children.sort(compare);\n  }\n\n  traversal(criteria, callback) {\n    criteria = criteria || (() => true);\n    this.children\n      .filter(criteria)\n      .forEach(callback);\n  }\n\n  getPath() {\n    const parentList = [];\n    let currentNode = this;\n    while(currentNode) {\n      parentList.push(currentNode);\n      currentNode = currentNode.parent;\n    }\n    return parentList.reverse();\n  }\n\n}\n","module.exports = function searchNode(tree, node, criteria, options) {\n  const currentNode = node || tree.rootNode;\n  if (criteria(currentNode)) {\n    return currentNode;\n  }\n  const children = currentNode.children\n  let target = null;\n  for(let i=0; i<children.length; i++) {\n    const item = children[i];\n    target = searchNode(tree, item, criteria);\n    if (target) {\n      return target;\n    }\n  }\n}\n","module.exports = function traversalTree(tree, node = null, criteria, callback) {\n  const currentNode = node || tree.rootNode;\n  if (!node) {\n    if (typeof criteria === 'function' && criteria(currentNode)) {\n      callback(currentNode);\n    } else if (criteria === null) {\n      callback(currentNode);\n    }\n  }\n  currentNode.traversal(criteria, callback);\n  const children = currentNode.children;\n\n  children.forEach((item) => {\n    traversalTree(tree, item, criteria, callback);\n  });\n}\n","module.exports = function serializeTree(tree, node = null, target = [], options) {\n  const { key_children } = options;\n  node = node || tree.rootNode;\n  const index = target.push(\n    Object.assign({ [key_children]: []}, node.content)\n  );\n  node.children.forEach((item) => {\n    serializeTree(tree, item, target[index-1][key_children], options);\n  });\n  return target;\n}\n","// for json tree\nmodule.exports = function removeEmptyChildren(jTree, node = null, options) {\n  const { key_children } = options;\n  node = node || jTree[0];\n  if (node[key_children].length === 0) {\n    delete node[key_children];\n  } else {\n    node[key_children].forEach((item) => {\n      removeEmptyChildren(jTree, item, options);\n    });\n  }\n}\n"],"sourceRoot":""}